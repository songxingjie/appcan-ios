webpackJsonp([34],{"8rW/":function(e,t,s){t=e.exports=s("FZ+f")(!1),t.push([e.i,"\n.bookIcon {\n  width: 2.6875rem;\n  height: 2.6875rem;\n  display: block;\n  margin-right: 5px;\n}\n",""])},niyI:function(e,t,s){var i=s("8rW/");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);s("rjj0")("0a7733cd",i,!0,{})},"wM+J":function(e,t,s){"use strict";function i(e){s("niyI")}Object.defineProperty(t,"__esModule",{value:!0});var n=s("bh5B"),r=s("NYxO"),a=s("wKE4"),o=s("LuSs"),l=s("tXUq"),u=s("g5qz"),c=s("8pLc"),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},h=(n.a,a.a,o.a,l.a,c.a,d({},Object(r.b)(["device"]),Object(r.b)("login",["userId"]),Object(r.b)("selectPerson",["personList"])),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}),p={components:{scroll:n.a,searchHeadr:a.a,navigation:o.a,orzname:l.a,noData:c.a},data:function(){return{startY:0,pullDownRefreshObj:{threshold:50,stop:40,txt:"刷新成功"},pullUpLoadObj:{threshold:0,txt:{more:"",noMore:"无更多数据"}},isSelPerson:"",title:"",selUnitId:"",navList:[],qlist:[],ulist:[],plist:[],queryParams:{pageNo:1,pageSize:20},isHasMore:!0}},computed:h({},Object(r.b)(["device"]),Object(r.b)("login",["userId"]),Object(r.b)("selectPerson",["personList"])),methods:{clickNav:function(e,t){if(0===t&&"sg"===e.id)return void this.$router.go(-1);var s=this.navList;this.navList=s.slice(0,t),this.selUnit(e)},navationList:function(){var e={name:sessionStorage.getItem("unitName"),id:sessionStorage.getItem("unitId")};this.navList=this.navList.concat(e)},selUnit:function(e){sessionStorage.setItem("unitName",e.name),sessionStorage.setItem("unitId",e.id),this.navationList(),this.refresh()},refresh:function(){this.queryParams={pageNo:1,pageSize:20},this.isHasMore=!0,this.pullDownRefreshObj={threshold:50,stop:40,txt:"刷新成功"},this.pullUpLoadObj={threshold:0,txt:{more:"",noMore:"无更多数据"}},this.getAllList()},selPerson:function(e){if("true"===this.isSelPerson)return!1;var t={userId:e.id};uexIMEx.startUIUserDetail(JSON.stringify(t))},init:function(){this.navationList(),this.getAllList()},getAllList:function(){var e=this;if(!e.isHasMore)return void e.$nextTick(function(t){e.$refs.scroll.forceUpdate()});e.title=sessionStorage.getItem("unitName");var t=e.queryParams;t.uniqueField=e.userId.userId,t.orgId=sessionStorage.getItem("unitId");var s="other"===e.inOrzType?"unitAndPerson":"myorz";u.a.postRequest(t,s).then(function(s){if(e.$vux.loading.hide(),1===t.pageNo){s.data.userList.length<t.pageSize&&(e.pullDownRefreshObj=null,e.pullUpLoadObj=null),e.qlist=[],e.ulist=[],e.plist=[];var i=s.data.companyList||[];e.qlist=i.map(function(e,t){return{name:e.name,id:e.orgId}});var n=s.data.deptList||[];e.ulist=n.map(function(e,t){return{name:e.name,id:e.orgId}}),e.plist=[]}var r=s.data.userList||[],a=r.map(function(t,s){var i={avatorLoc:t.avatorLoc,name:t.name,id:t.uniqueField,deptName:"",isSelect:!0};return"true"===e.isSelPerson&&(i.isSelect=e.isHasSel(t.uniqueField)),i});if(e.isHasMore=a.length>0,e.isHasMore&&e.queryParams.pageNo++,"true"===sessionStorage.getItem("isSelect")&&"message"===sessionStorage.getItem("fromSelPerson")){var o=e.userId.userId,l=a.findIndex(function(e){return o===e.id});a.splice(l,1)}e.plist=e.plist.concat(a),e.$nextTick(function(t){e.$refs.scroll.forceUpdate()})}).catch(function(t){e.$vux.loading.hide(),console.log(t)})},isHasSel:function(e){return this.personList[e]}},mounted:function(){this.isSelPerson=sessionStorage.getItem("isSelect")},beforeRouteEnter:function(e,t,s){var i=t.name;s(function(e){"cityMangeEnterprises"===i&&(e.navList=[{name:"市管企业",id:"sg"}]),e.inOrzType=sessionStorage.getItem("inOrzType"),e.init()})}},v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"allBody"},[s("view-box",{ref:"viewBox",attrs:{"body-padding-top":"46px","body-padding-bottom":"0"}},[s("div",{staticClass:"allHeader",attrs:{slot:"header"},slot:"header"},[s("x-header",{attrs:{title:e.title}}),e._v(" "),s("searchHeadr",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]})],1),e._v(" "),s("scroll",{directives:[{name:"show",rawName:"v-show",value:!(0==e.qlist.length&&0==e.ulist.length&&0==e.plist.length),expression:"!(qlist.length == 0&&ulist.length == 0&&plist.length == 0)"}],ref:"scroll",staticStyle:{background:"none"},attrs:{scrollbar:!1,pullDownRefresh:e.pullDownRefreshObj,pullUpLoad:e.pullUpLoadObj,startY:e.startY},on:{pullingDown:e.refresh,pullingUp:e.getAllList}},[s("div",[s("navigation",{staticClass:"c-ffP",attrs:{list:e.navList},on:{clickEvent:e.clickNav}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.qlist.length>0,expression:"qlist.length>0"}]},[s("orzname",{attrs:{list:e.qlist,type:"1"},on:{runEvent:e.selUnit}}),e._v(" "),s("div",{staticClass:"mtd75"})],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.ulist.length>0,expression:"ulist.length>0"}]},[s("orzname",{attrs:{list:e.ulist,type:"2"},on:{runEvent:e.selUnit}}),e._v(" "),s("div",{staticClass:"mtd75"})],1),e._v(" "),s("orzname",{directives:[{name:"show",rawName:"v-show",value:e.plist.length>0,expression:"plist.length>0"}],attrs:{list:e.plist,type:"3"},on:{runEvent:e.selPerson}})],1)]),e._v(" "),s("no-data",{directives:[{name:"show",rawName:"v-show",value:0==e.qlist.length&&0==e.ulist.length&&0==e.plist.length,expression:"qlist.length == 0&&ulist.length == 0&&plist.length == 0"}],attrs:{text:"暂无数据"}})],1)],1)},g=[],m={render:v,staticRenderFns:g},f=m,b=s("VU/8"),w=i,I=b(p,f,!1,w,null,null);t.default=I.exports}});